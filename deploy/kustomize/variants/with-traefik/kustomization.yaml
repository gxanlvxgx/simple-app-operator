apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Prerequisites: Traefik Ingress Controller must be installed in the cluster
# Install with: helm install traefik traefik/traefik --namespace traefik --create-namespace

resources:
  - ../../bases/controller
  - ../../bases/dashboard

patches:
  - target:
      kind: Deployment
      name: simple-app-operator-controller-manager
    patch: |-
      - op: add
        path: /spec/template/spec/containers/0/env
        value:
          - name: INGRESS_CLASS_NAME
            value: "traefik"
